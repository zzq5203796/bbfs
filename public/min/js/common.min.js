/* 2018-11-05 12:38:51 */
;var version='2018-11-05 12:38:51';/* js/common */; _config={debug:true,level:0,};$(".sort").click(function(){var box=$(".menu-text.active").parent().parent(),sort_status=$(this).hasClass("desc")?1:($(this).hasClass("asc")?2:0);var menu=box.children();$(this).removeClass("desc").removeClass("asc");sort_status==0 && $(this).addClass("desc");sort_status==1 && $(this).addClass("asc");menu=menu.sort(function compareFunction(obj1,obj2){var t1=$(obj1).text(),t2=$(obj2).text();if(sort_status==0){t1=$(obj1).text();t2=$(obj2).text();}if(sort_status==1){t1=$(obj2).text();t2=$(obj1).text();}if(sort_status==2){t1=$(obj1).children(".menu-text").attr("title");t2=$(obj2).children(".menu-text").attr("title");}return t1.localeCompare(t2,"zh");});var str='';for(var i=0;i<menu.length;i++){str+=$(menu[i]).prop("outerHTML");}box.html(str);});$(".set-title").on('click',function(e){if($(this).attr("data-title")==undefined||$(this).attr("data-title")==''){$(this).attr("data-title",$("title").html());}$("title").html($(".menu-text.active").text()+" | "+$(this).attr("data-title"));});$(".reload").on('click',function(e){reloadDom(this);});$(".change-back").on('change',function(e){$(this).toggleClass("on");var data=$(this).get(0).checked?{toggle:'show',fun:ballStart}:{toggle:'hide',fun:ballStop};$("#con")[data.toggle]();data.fun();});function autorequires(){require('plug/*');}function template_load(url,box,cb){if($("#loadScript").length==0){$("body").append("<div id='loadScripts'></div>");}if($("#loadScript-"+box).length==0){$("#loadScripts").append("<div id='loadScript-"+box+"'></div>");}$("#loadScript-"+box).load(url,function(responseTxt,statusTxt,xhr){if(statusTxt=="success")cb();if(statusTxt=="error")alert("Error:"+xhr.status+":"+xhr.statusText);});}/* js/plug/auto */; var startTime=Math.ceil(new Date().getTime()/1000),getDuration=function(){var time='',hours=0,minutes=0,seconds=0,endTime=Math.ceil(new Date().getTime()/1000),duration=endTime-startTime;hours=Math.floor(duration/3600);minutes=Math.floor(duration % 3600/60);seconds=Math.floor(duration % 3600 % 60);time=(hours<10?'0'+hours:hours)+':'+(minutes<10?'0'+minutes:minutes)+':'+(seconds<10?'0'+seconds:seconds);return time;};/* js/plug/ajax */; $(document).on('click','.ajax',function(e){e.stopPropagation();var url=$(this).attr("url"),data={A:1},data_fun=$(this).attr("ajax-data"),method=$(this).hasClass("ajax-post")?'POST':'GET',tips=$(this).hasClass("tips"),cb=$(this).attr("ajax-cb");try{data=eval(data_fun);}catch(e){data=data_fun;data=JSON.parse(data);}try{if(typeof(data)=="string"){data=JSON.parse(data);}}catch(e){data={};}url=url?url:'/upload/index';var opt={tips:tips,success:cb?eval(cb):function(){}};if(!$(this).hasClass('ajax-only'))opt._obj=$(this);_ajax.request(url,method,data,opt);return false;});_ajax=(function(){var that={};that.get=function(url,params,option){that.request(url,'get',params,option);};that.post=function(url,params,option){that.request(url,'post',params,option);};that.data={};that.request=function(url,method,data,option){var opt={success:function(){},error:error,msg:'',id:'auto',show_msg:false,type:'json',timeout:30,};option=typeof(option)=='function'?{success:option}:option;option=Object.assign(opt,option);if(option._obj){if(option._obj.hasClass('disable')){return;}option._obj.addClass("wait disable");}if(option.id !=='auto' && that.data[option.id]){that.data[option.id].abort();}req=$.ajax({url:url,async:true,type:method,data:data,dataType:option.type,success:success,error:(function(option){return function(xhr,status,error){log([xhr,status,error],10);option.error("require error.");}})(option),timeout:option.timeout * 1000});if(option.id !=='auto'){that.data[option.id]=req;}function autoEnd(){if(option._obj){option._obj.removeClass("wait disable");}}function success(res){option.show_log && log(res);autoEnd();sound("success");var code=res.status;if(code !=1){option.error(res.msg,res);}else{showres(res.msg);option.success(res.data,res);}}function showres(msg){option.show_msg && showMsg(res.msg);}function error(msg){autoEnd();showMsg(msg);sound("eorror");}};return that;})();/* js/plug/full-window */; (fullWindow=function(){var fullData={autoBox:'.full-window',class:'in-full',attr:'data-for',fullBtn:'.full-window-btn',close:'.close-window',closeClass:'close-window',};$(fullData.fullBtn).on('click',function(e){toggleWindow(this);});$("body").on('click',fullData.close,function(e){toggleWindow(this);});function toggleWindow(obj){var box=$(obj).attr(fullData.attr);var box_obj=$(box?"#"+box:fullData.autoBox);if(box_obj.length==0){showMsg(lang.get("can't found full window.")+box);return false;}if($(fullData.close).length==0){$("body").append('<div class="'+fullData.closeClass+'" '+fullData.attr+'="'+(box?box:'')+'"><i class="layui-icon layui-close"></i></div>');}$(fullData.close).toggle();box_obj.toggleClass(fullData.class);}})();/* js/plug/keydown */; function reloadDom(obj){if(obj=='f5'){try{document.myIframe.location.reload();showMsg(lang.get("iframe reload"));}catch(e){showMsg(lang.get("disable F5"));}return false;}if($(obj).attr("data-for")){}else{window.location.reload(true);}}window.onbeforeunload=function(event){var duration=getDuration();showMsg('clear cache success.');$.ajax({url:'/zip/menu',dataType:"json",async:false,data:"",beforeSend:function(){},success:function(data){}});};$(document).keydown(function(e){var code=e.keyCode;if(!group_key(e)){return false;}if(code !=40 && code !=38){return true;}var node=code==40?'next':'prev';var obj=$(".menu-text.active");if(obj.parent()[node]().length>0){var height=obj.height(),scroll=obj.parents('.scroll'),top=obj.parent()[node]().offset().top;if(top<0){scroll.scrollTop(scroll.scrollTop()+top);}var jump=top+height * 2.9-scroll.height();if(jump>0){scroll.scrollTop(scroll.scrollTop()+jump);}obj.parent()[node]().children(".menu-text")[0].click();return false;}});function group_key(e){var code=e.keyCode;this.ctrl={shiftKey:16,ctrlKey:17,altKey:18,};this.checkKey=function(data){for(var i in data){if(e[i] && code==data[i]){return true;}}return false;};this.checkKey(this.ctrl);if((e.ctrlKey && code==17)||(e.altKey && code==18)||(e.shiftKey && code==16)){return true;}$(".keycontent").children().length>35 && $(".keycontent").children().eq(1).remove();$(".keycontent").append("<p>CTRL:"+e.ctrlKey+";&nbsp;&nbsp;&nbsp;&nbsp;ALT:"+e.altKey+";&nbsp;&nbsp;&nbsp;&nbsp;Code:"+code+"</p>");if(code==116){reloadDom("f5");return false;}return true;}/* js/plug/message */; function getmessage(){}if(_config.debug){log(version,4);}function showMsg(msg){layer.msg(lang.get(msg));}function log(data,level){level=level?level:0;if(_config.level<=level){console.log(data,level);}}/* js/plug/progress-bar */; var progressLoadingTimeOut;function progressLoading(num){clearTimeout(progressLoadingTimeOut);progressLoadingTimeOut=setTimeout(function(){num=num?num:0;num=num>100?100:num;progressBar(num);if(num<100){num+=Math.ceil(Math.random()* 5)+1;progressLoading(num);}},9);}function progressBar(num){$(".progress-bar .bar").width(num+"%").attr('data-afterContent',num+"%");}/* js/plug/runscroll */; $(".win-min-btn").on('click',function(){$(this).toggleClass("icon-narrow");$(this).parents(".win-nav").next().toggle();});$(".win-close-btn").on('click',function(){$(this).parents(".win-box").hide();});function runscroll(){var obj=$(".run-scroll");var max=obj[0].scrollHeight/2,scrollto=obj.scrollTop();obj.scrollTop((scrollto>=max?0:scrollto)+2);}if($(".run-scroll").length>0){var str='';for(var i=1;i<20;i++){str+='<li>好消息! 好消息'+i+'...</li>';}$(".run-scroll .auto").html(str+str);var scrolltimeout=setInterval(runscroll,30);}/* js/plug/store */; function setStore(name,key,value){return store.setKey(name,key,value);}function setStore1(name,obj,is_tran){store.merge(name,obj,is_tran);}function getStore(name){return store.get(name);}store=(function(){function setKey(name,key,value){var store=getStore(name);if(typeof(key)=="Object"){store=Object.assign(store,key);}else{store[key]=value;}set(name,store);}function push(name,obj){var store=getStore(name);store.push(obj);set(name,store);}function get(name){var store=localStorage.getItem(name);store=store?store:'{}';try{return JSON.parse(store);}catch(e){showMsg(lang.get("not found STORE")+" ["+name+"]");return{};}}function set(name,store){store=JSON.stringify(store);localStorage.setItem(name,store);}function merge(name,obj,is_tran){var store=getStore(name);store=is_tran?Object.assign(obj,store):Object.assign(store,obj);set(name,store);}var that={};that.set=set;that.setKey=setKey;that.push=push;that.merge=merge;that.get=get;return that;})();/* js/plug/string */; lang={data:{"can't found full window.":'找不到那瘪犊子.',"not found STORE":'小三有不见了',"clear cache success.":'正在清理智障',"wait:":'老子腿都站麻了  ',"iframe reload":'隔壁老王前来报到',"disable F5":'哈哈，没反应，您奈我何.',"require error.":'又骗老子去搬砖.',"success":'成功人士路过'," ":'',},get:function(key){var keyStr=lang.data[key]?lang.data[key]:key;return keyStr;}};function stripscript(str){return str.replace(/(^\s*)|(\s*$)/g,"").replace("\\","\\\\").replace("*","\\*").replace("+","\\+").replace("|","\\|").replace("{","\\{").replace("}","\\}").replace("(","\\(").replace(")","\\)").replace("^","\\^").replace("$","\\$").replace("[","\\[").replace("]","\\]").replace("?","\\?").replace(",","\\,").replace(".","\\.").replace("&","\\&");}_Trans={match:function(str){return str.replace(/(^\s*)|(\s*$)/g,"").replace("\\","\\\\").replace("*","\\*").replace("+","\\+").replace("|","\\|").replace("{","\\{").replace("}","\\}").replace("(","\\(").replace(")","\\)").replace("^","\\^").replace("$","\\$").replace("[","\\[").replace("]","\\]").replace("?","\\?").replace(",","\\,").replace(".","\\.").replace("&","\\&");},trim:function(str){return str.replace(/(^\s*)|(\s*$)/g,"");},html:function(str){return str;}}/* js/plug/tabs */; (bbfTabs=function(){var tabsData={active:'active',box:'.bbf-tabs',selectBox:'.bbf-tabs-select',listBox:'.bbf-tabs-list',};$(tabsData.box+" .bbf-tabs-item").on('click',function(e){e.stopPropagation();switchTab(this);});$(tabsData.box+" .bbf-tabs-item.over").mousemove(function(e){e.stopPropagation();switchTab(this);});$(tabsData.box+" .bbf-tabs-next").on('click',function(e){e.stopPropagation();nextTab(this);});$(tabsData.box+" .bbf-tabs-prev").on('click',function(e){prevTab(this);});function switchTab(obj,num){num=num?num:0;var chechBox=num==0?$(obj):selectBox(obj).children().eq((selectActiveBox(obj).index()+num)% selectBox(obj).children().length);chechBox.addClass(tabsData.active).siblings().removeClass(tabsData.active);listBox(obj).children().eq(selectActiveBox(obj).index()).show().siblings().hide();}function selectBox(obj){return $(obj).parents(tabsData.box).children(tabsData.selectBox);}function selectActiveBox(obj){return selectBox(obj).children("."+tabsData.active);}function listBox(obj){return $(obj).parents(tabsData.box).children(tabsData.listBox);}function nextTab(obj){selectBox(obj);switchTab(obj,1);}function prevTab(obj){switchTab(obj,-1);}})();/* js/plug/sound */; function sound(type){_sound.play(type);}_sound={data:{error:["error","fail-mali","gitign/fail-aa","gitign/fail-bi","gitign/fail-game","gitign/error",],success:["gitign/victory-zhadan","gitign/true","gitign/true-answay",],warring:["gitign/warring-dudu","gitign/warring-jingbao",],auto:['bi',"error","fail-mali"],},path:"/public/sound/",palyData:[],init:function(){},getValue:function(type){if(1){return this.data.auto[0];}type=this.data[type]?this.data[type]:this.data.auto;type=type[randomNum(0,type.length-1)];return type;},play:function(type){type=this.getValue(type);try{audio=new Audio(_sound.path+type+".mp3");audio.play();this.palyData.push(audio);}catch(e){log(e,10);}}};function randomNum(minNum,maxNum){switch(arguments.length){case 1:return parseInt(Math.random()*minNum+1,10);break;case 2:return parseInt(Math.random()*(maxNum-minNum+1)+minNum,10);break;default:return 0;break;}};